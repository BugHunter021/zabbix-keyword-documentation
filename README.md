# توضیح کلمات کلیدی مورد استفاده در زبیکس

### مفهوم SNMP چیست

Simple network management protocol

## چه چیزهایی را میشو مانیتور کرد ؟

**بصورت کلی موارد زیر را میتوان مانیتور کرد:**

در سطح برنامه ها(Application)  نرم افزارها،دیتابیس،صفحات سایت و...
در سطح سیستم عامل(OS)منابع سخت افزاری،فایل ها، احراز هویت کاربران و ...
در سطح شبکه(network) ترافیک شبکه، لینک های ارتباطی و ...
در سطح تجهیزات سخت افزاری(Device) روتر،سوئیچ،فایروال،سرور و ...
IPMI
Intelligent Platform Management Interface
قطعه ای سخت افزاری است که توسط آن میتوان بر بخش هایی از دستگاه اصلی کنترل داشت یا پارامترهای تعریف شده را دریافت کرد.مثلا درون ماردبردهای SuperMicro  قرار دارد.
روش های دریافت داده ها یا Data Gathering
روش های متفاوتی با توجه به هاست مورد نیاز برای مانیتور وجود دارد.
1.	از طریق Zabbix agent(active,passive)
2.	از طریق Agent SNMP
3.	از طریق Trap SNMP (ارسال خودکار و بدون درخواست از سمت زبیکس)
4.	از طریقZabbix Agentless monitoring 
5.	از طریق CURL (ارسال داده توسط URL)
6.	JXM  برای هاست مبتنی بر جاوا
7.	از طریق ODBC  یا ارتباط با دیتابیس ماکروسافتی access , db2
8.	از طریق WMI query مختص ویندوز
9.	IPMI که قطعه ای سخت افزاری بر روی دیوایس ها میباشد.
10.	Custom Command از طریق zabbix sender  و یا اجرای اسکریپت از طریق Zabbix Server


### عبارت Host چیست


مواردی که میخواهیم مانیتور کنیم را باید در زبیکس تعریف کنیم که میتوانند انواع: سیستم عاملها،تجهیزات و دستگاه های شبکه یا کامپیوتری،اپلیکیشن ها و یا حتی صفحات یا سایت های اینترنتی ما باشند.برای اضافه کردن Host ابتدا باید درصورت نیاز  Zabbix Agent را نصب و کانفیگ کنیم.یا ازZabbix sender  استفاده کنیم.

### عبارت Item چیست

داده های دریافتی از سمت Zabbix agent که برای مانیتورکردنHost  استفاده میشوند.
معمولا Item ها از قبل توسط Zabbix server  در Template ها تعریف شده اند اما در صورت نیاز میتوانیم خودمان Item جدید بسازیم و با Zabbix Sender مقادر مورد نیازمون رو از Host به Zabbix Server بفرستیم و مانیتور کنیم و یا Trigger دلخواه رو روی Item تنظیم کنیم.
برای ساخت Item جدید نیز تنها کافی است که نام  Itemانتخاب کنیم و در مقدار Key کلید ارسالی را نامگذاری کنیم و در بخش Type بسته به Host مثلا Zabbix agent(active)  را انتخاب کنیم.سپس Time Interval را مشخص کنیم.

### عبارت Trigger چیست

تعریف شرط یک رویداد بر روی Item  های دریافتی از Zabbix Agent
برای تعریف Trigger از قسمت Configuration و بخش Host آیتم Trigger را انتخاب و Ctreate trigger را میزنیم .سپس نام گذاری میکنیم و در قسمت Experssion شرط موردنظرمون رو با استفاده از گزینه های کمکی و انتخاب Item مورد نظر مینویسیم.در این بخش میشه چندین شرط رو با استفاده از AND ,OR نوشت .همچنین از قسمت Severity شدت اهمیت Trigger رو تعیین کرد.
Event
### رخداد شکل گیری trigger

### عبارت Action چیست

### شروع عملیات در صورت فعال شدن trigger

*	برای تنظیم  Actionبرای Trigger خاص به Configuration میریم و روی آیتم Action  و سپس Trigger Actions میزنیم.سپس Create action  را میزنیم Action رو نامگذاری میکنیم.در قسمت Conditions  باید Trigger  یا شرط موردنظر رو اتخاب کنیم.سپس درسربرگ  operations تایم رو تنظیم و باگزینه add Operations انتخاب میکنیم که برای چه کسانی یا چه کسی اکشن ارسال شود.قبل از این کار باید برای یوزر موردنظر از بخش تنظیمات یوزر در بخش Media  روش مدیا را انتخاب و مثلا در روش ارسال Email(HTML) ایمیل یوزر را وارد کنیم و همچنین میتوانیم مشخص کنیم که در چه ساعاتی و triggerهای با چه اهمیتی فقط ارسال شوند

### عبارت Media چیست

### روش های اطلاع رسانی Action ها به مدیرهای سیستم

*	برای تنظیم مدیا به Administration  میریم و روی MediaType  میزنیم و از روش های طلاع رسانی یکی رو انتخاب و Config  میکنیم.مثلا آیتم Email(HTML)  را برای ارسال ایمیل Action  یک Trigger  با اطلاعات میل سرور تنظیم و تست میکنیم.
SNMP Device 
Simple network management protocol
در این روش بدونZabbix Agent  داده های مورد نظر برای مونیتور از طریق پروتکل SNMP ارسال میشوند که دارای ورژن 1و2و3 است که تنها در ورژن 3 میتوان بصورت امن بوسیله پسورد یا رمزنگاری از داده های ارسالی محافظت کرد.برای اتصال SNMP یک هاست باید نامی در قسمت Community قرار داد که معکولا در سیستم ها با نام public نوشته میشود.این Community میتواند با دسترسی Read یا Write باشد که باید مشخص کنیم.در ویندوز7 فقط SNMP v2 وجود دارد و نسخه 3 نداریم.
برای ساخت هاست جدید تنها نیاز است که در تنظیمات ساخت هاست Interface را بصورت SNMP انتخاب کنیم و آی پی مورد نظر را بدهیم و ورژن SNMP را مشخص کنیم.که در صورت ورژن 3 باید یوزرنیم پسورد و موارد رمزنگاری را مطابق دیوایس تنظیم کنیم. در بخش SNMP community هم عبارت public را مینویسیم.در نهایت هم Template های مربوط به SNMP را برای هاست جدید انتخاب میکنیم.
Web Scenario
برای مانیتور کردن وب سایت به کار میرود
برای این کار از قسمت Host باید روی Web کلیک کرده و Create Web Scenario را بزنیم.که ابتدا نام Update interval که همان زمان آپیدت است را تنظیم و از قسمت Agent مرورگر مناسب مانیتورکردن سایت را انتخاب میکنیم.
دربخش Step نام و آدرس سایت را تنظیم میکنیم و Add میکنیم.
برای ساخت Trigger مناسب برای این سناریو میتوانیدم از عبارت Downloa Speed  کمک بگیریم که میزان سرعت دانلود و وضعیت بالاآمدن سایت را نشان میدهد.


Sending-Amount یا  UserParameter 
اضافه کردن پارامتر دلخواه در روند کار zabbix agent  برای ارسال خودکار به Zabbix server
برای این کار ابتدا باید  یک Item  با یک Key جدید تعریف شده بسازیم.سپس باید تنظیمات مربوط به UserParameter رو انجام بدیم که باید به پوشه Zabbix Agent بریم و فایلی جدید رو با پسوند .conf بسازیم و دستورات مربوط به UserParameter رو بنویسیم.بطور مثال:
UserParameter=<key>,<command>
UserParameter=NewKey,echo 1 
همیشه عدد 1 رو برای کلید تعریف شده ارسال میکنه   
Zabbix Proxy
با Zabbix Proxy  میتوانیم سیتم های شبکه را بصورت ایزوله و بدون اینترنت نگه داریم که مستقیما به Zabbix Server  دیتا ارسال نکند.
با ساخت سیستمی مجزا مانند Zabbix Server  و نصب پکیج Zabbix Proxy  میتوانیم سیستمی ایجاد کنیم که هاست های مورد نیاز ما برای مانیتور دیتای خود را مستقیما برای Zabbix Server ارسال نکنند.بدین ترتیب که ابتدا برای Zabbix Proxy و از طریق Zabbix Proxy  برای Zabbix Server  ارسال میشود. 




Get
تست عملکرد zabbix agent 
برای این کار باید در فایل config zabbix agent در بخش Server, Server Active آی پی Local رو که میخواهیم دستورات Get رو اجرا کنیم اضافه کنیم.
Zabbix_get –s 127.0.0.1 –p 10050 –k NewKey

Script
برای اجرا کردن دستورات از راه دور(از Zabbix Server روی Zabbix Agent)
در ابتدا باید مطمئن بشیم که پارامتر EnableRemoteCommands در فایل تنظیمات زبیکس zabbix_agentd.conf با عدد 1 مقدار دهی شده باشد که دسترسی اجرای اسکریپت روی هاست را داشته باشیم.
از قسمت Administration در بخش Script روی Create Script میزنیم و اسکریپت خومون رو متناسب با دستور و سیستم عامل میسازیم.مثلا دستور netstat –n.بعد از نامگذاری مناسب از بخش Scop گزینه Manual host action رو انتخاب و در بخش Type گزینه zabbix agent رو انتخاب میکنیم.در بخش Command هم دستور خودمون رو مینویسم و add رو میزنیم.
از بخش moniroting در قسمت Host روی هاست موردنظر میزنیم و اسکریپت دلخواه رو انتخاب میکنیم تا پاسخ اجرای اسکریپت برای ما نمایش داده شود.

Template
قالب بندی رخدادها برای دیواس خاص رو میگن

Discovery
برای پیدا کردن سیستم های درون شبکه که نیاز به مانیتورکردن آنها داریم
برای اینکار میتوانیم بوسیله جستجوی پورت یا سرویسی مانند Zabbix Agent استفاده کنیم و یا با تعریف ESXi سیستمهای زیر مجموعه آن را بیابیم


Frontend
محیط یوزراینترفیس با php
Zabbix server , zabbix sender
Zabbix agent:active , passive
Java Management Extensions (JMX) مبتنی بر جاوا
IPMI (Intelligent Platform Management Interface)
مدیریت و ارسال دستور به تجهیزات  سخت افزاری
DataFlow
چارت روند و جریان کاری از تعریف یک سیستم تا یک اکشن رو مشخص میکنه
Create (Host,Item,Trigger,Action)
LAMP (Linux,Apache,myphp,PHP)


